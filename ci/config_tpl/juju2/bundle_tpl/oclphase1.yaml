
    contrail-openstack:
      charm: ./{{ ubuntu.release }}/contrail-openstack
      options:
        install-keys: |
          "http:65.122.57.42/repo/key"
        install-sources: |
          - "deb http:65.122.57.42/repo /"

    contrail-agent:
      charm: ./{{ ubuntu.release }}/contrail-agent
      options:
        install-keys: |
          "http:65.122.57.42/repo/key"
        install-sources: |
          - "deb http:65.122.57.42/repo /"

    contrail-analytics:
      charm: ./{{ ubuntu.release }}/contrail-analytics
      num_units: {{ unit_qty() }}
      to:
{% for unit_id in to_select() %}
        - "nodes/{{ unit_id }}"
{% endfor %}

    contrail-analyticsdb:
      charm: ./{{ ubuntu.release }}/contrail-analyticsdb
      num_units: {{ unit_qty() }}
      to:
{% for unit_id in to_select() %}
        - "nodes/{{ unit_id }}"
{% endfor %}

    contrail-controller:
      charm: ./{{ ubuntu.release }}/contrail-controller
      num_units: {{ unit_qty() }}
      to:
{% for unit_id in to_select() %}
        - "nodes/{{ unit_id }}"
{% endfor %}

    contrail-keystone-auth:
      charm: ./{{ ubuntu.release }}/contrail-keystone-auth
      num_units: 1
      bindings:
        "": internal-api
      to:
        - "lxd:nodes/0"

