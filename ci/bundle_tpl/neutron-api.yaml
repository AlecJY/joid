    neutron-api:
      charm: "local:{{ ubuntu.release }}/neutron-api"
      num_units: {{ unit_qty() }}
      options:
        neutron-security-groups: true
{% if os.network.controller == 'nosdn' %}
        overlay-network-type: vxlan
{% elif os.network.controller == 'odl' %}
        manage-neutron-plugin-legacy-mode: False
{% elif os.network.controller == 'onos' %}
        flat-network-providers: "*"
        manage-neutron-plugin-legacy-mode: False
{% endif %}
{% if os.ha.mode == 'ha' %}
        vip: {{ opnfv.vip.neutron }}
{% endif %}
      to:
{% for unit_id in to_select() %}
        - "lxc:nodes={{ unit_id }}"
{% endfor %}
